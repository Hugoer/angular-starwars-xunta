<!-- Mensaje de carga mientras se obtienen las opciones -->
<div *ngIf="isLoading()" class="loading">
  {{ 'add.loading' | translate }}
</div>

<!-- Formulario de creación de personaje -->
<form *ngIf="!isLoading()" [formGroup]="personForm" (ngSubmit)="onSubmit()">
  <!-- Campo: Nombre -->
  <div class="form-field">
    <label for="name">{{ 'add.name' | translate }}</label>
    <input id="name" type="text" formControlName="name" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('name')?.touched && personForm.get('name')?.invalid">
      {{ 'add.errorName' | translate }}
    </div>
  </div>

  <!-- Campo: Altura -->
  <div class="form-field">
    <label for="height">{{ 'add.height' | translate }}:</label>
    <input id="height" type="text" formControlName="height" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('height')?.touched && personForm.get('height')?.invalid">
      {{ 'add.errorHeight' | translate }}
    </div>
  </div>

  <!-- Campo: Peso -->
  <div class="form-field">
    <label for="mass">{{ 'add.mass' | translate }}:</label>
    <input id="mass" type="text" formControlName="mass" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('mass')?.touched && personForm.get('mass')?.invalid">
      {{ 'add.errorMass' | translate }}
    </div>
  </div>

  <!-- Campo: Color de Cabello -->
  <div class="form-field">
    <label for="hair_color">{{ 'add.hair_color' | translate }}:</label>
    <input id="hair_color" type="text" formControlName="hair_color" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('hair_color')?.touched && personForm.get('hair_color')?.invalid">
      {{ 'add.errorHairColor' | translate }}
    </div>
  </div>

  <!-- Campo: Color de Piel -->
  <div class="form-field">
    <label for="skin_color">{{ 'add.skin_color' | translate }}:</label>
    <input id="skin_color" type="text" formControlName="skin_color" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('skin_color')?.touched && personForm.get('skin_color')?.invalid">
      {{ 'add.errorSkinColor' | translate }}
    </div>
  </div>

  <!-- Campo: Color de Ojos -->
  <div class="form-field">
    <label for="eye_color">{{ 'add.eye_color' | translate }}:</label>
    <input id="eye_color" type="text" formControlName="eye_color" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('eye_color')?.touched && personForm.get('eye_color')?.invalid">
      {{ 'add.errorEyeColor' | translate }}
    </div>
  </div>

  <!-- Campo: Año de Nacimiento -->
  <div class="form-field">
    <label for="birth_year">{{ 'add.birth_year' | translate }}:</label>
    <input id="birth_year" type="text" formControlName="birth_year" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('birth_year')?.touched && personForm.get('birth_year')?.invalid">
      {{ 'add.errorBirthYear' | translate }}
    </div>
  </div>

  <!-- Campo: Género -->
  <div class="form-field">
    <label for="gender">{{ 'add.gender' | translate }}:</label>
    <input id="gender" type="text" formControlName="gender" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('gender')?.touched && personForm.get('gender')?.invalid">
      {{ 'add.errorGender' | translate }}
    </div>
  </div>

  <!-- Campo: Mundo Natal -->
  <div class="form-field">
    <label for="homeworld">{{ 'add.homeworld' | translate }}:</label>
    <input id="homeworld" type="text" formControlName="homeworld" class="search-input" />
    <div class="error-text" *ngIf="personForm.get('homeworld')?.touched && personForm.get('homeworld')?.invalid">
      {{ 'add.errorHomeworld' | translate }}
    </div>
  </div>

  <!-- Campo: Películas (multiselect) -->
  <div class="form-field">
    <label for="films">{{ 'add.film' | translate }}:</label>
    <select id="films" multiple formControlName="films" class="search-input">
      <option *ngFor="let film of filmsOptions()" [value]="film.value">
        {{ film.label }}
      </option>
    </select>
    <div class="error-text" *ngIf="personForm.get('films')?.touched && personForm.get('films')?.invalid">
      {{ 'add.errorFilms' | translate }}
    </div>
  </div>

  <!-- Campo: Especies (multiselect) -->
  <div class="form-field">
    <label for="species">{{ 'add.species' | translate }}:</label>
    <select id="species" multiple formControlName="species" class="search-input">
      <option *ngFor="let sp of speciesOptions()" [value]="sp.value">
        {{ sp.label }}
      </option>
    </select>
    <div class="error-text" *ngIf="personForm.get('species')?.touched && personForm.get('species')?.invalid">
      {{ 'add.errorSpecies' | translate }}
    </div>
  </div>

  <!-- Campo: Vehículos (multiselect) -->
  <div class="form-field">
    <label for="vehicles">{{ 'add.vehicles' | translate }}:</label>
    <select id="vehicles" multiple formControlName="vehicles" class="search-input">
      <option *ngFor="let veh of vehiclesOptions()" [value]="veh.value">
        {{ veh.label }}
      </option>
    </select>
    <div class="error-text" *ngIf="personForm.get('vehicles')?.touched && personForm.get('vehicles')?.invalid">
      {{ 'add.errorVehicles' | translate }}
    </div>
  </div>

  <!-- Campo: Naves Estelares (multiselect) -->
  <div class="form-field">
    <label for="starships">{{ 'add.starships' | translate }}:</label>
    <select id="starships" multiple formControlName="starships" class="search-input">
      <option *ngFor="let sh of starshipsOptions()" [value]="sh.value">
        {{ sh.label }}
      </option>
    </select>
    <div class="error-text" *ngIf="personForm.get('starships')?.touched && personForm.get('starships')?.invalid">
      {{ 'add.errorStarships' | translate }}
    </div>
  </div>

  <!-- Botón de envío -->
  <button type="submit" [disabled]="!canSubmit()">
    {{ 'add.create' | translate }}
  </button>

  <!-- Mensaje de error global (ej. error al enviar) -->
  <div *ngIf="error()" class="error-text">
    {{ error() }}
  </div>
</form>
